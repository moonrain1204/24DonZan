<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>佛乘禪功 24 式功課表</title>
    <style>
        :root {
            --primary-color: #8e44ad;
            --bg-color: #f9f9f9;
            --card-bg: #ffffff;
            --text-color: #333;
            --accent-color: #f1c40f;
            --play-color: #27ae60;
            --stop-color: #e74c3c;
            --note-bg: #eef7ff;
            --note-border: #3498db;
        }

        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .version-tag {
            text-align: right;
            font-size: 0.8rem;
            color: #888;
            margin-bottom: -10px;
        }

        header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 2px solid var(--primary-color);
            margin-bottom: 30px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .zen-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .zen-item {
            background: var(--card-bg);
            padding: 15px;
            text-align: center;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s;
            border: 1px solid #ddd;
            font-weight: bold;
        }

        .zen-item:hover {
            transform: translateY(-3px);
            background: #f0e6ff;
            border-color: var(--primary-color);
        }

        #detail-view {
            display: none;
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .back-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .audio-controls {
            background: #fdfdfd;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #eaeaea;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .audio-row {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 15px;
            white-space: nowrap;
        }

        .audio-label {
            font-weight: bold;
            min-width: 70px;
        }

        .btn-group {
            display: flex;
            gap: 20px;
        }

        .icon-only-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.8rem;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s;
        }

        .play-icon { color: var(--play-color); }
        .stop-icon { color: var(--stop-color); }

        .section-title {
            color: var(--primary-color);
            border-left: 5px solid var(--primary-color);
            padding-left: 10px;
            margin: 20px 0 10px;
        }

        .quote-box {
            font-family: "DFKai-SB", "BiauKai", "標楷體", serif;
            font-style: normal;
            background: #fffbe6;
            padding: 15px;
            border: 1px solid #ffe58f;
            margin: 10px 0;
            font-size: 1.1rem;
        }

        .note-block {
            background: var(--note-bg);
            border: 1px solid var(--note-border);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            white-space: pre-line;
            font-size: 0.95rem;
        }

        .instruction-block {
            background: #f1f1f1;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 5px;
            white-space: pre-line;
            border: 1px dashed #ccc;
        }

        .sub-label {
            font-weight: bold;
            color: #444;
            margin-bottom: 5px;
            display: block;
        }
        
        .content-text {
            white-space: pre-line;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="version-tag">Version 0.9</div>

    <header>
        <h1>佛乘禪功 24 式</h1>
        <p>心理功課及生理功課</p>
    </header>

    <div id="main-list" class="zen-list"></div>

    <div id="detail-view">
        <button class="back-btn" onclick="showList()">← 返回列表</button>
        <h2 id="detail-title"></h2>
        
        <div class="audio-controls" id="audio-section">
            <div class="audio-row" id="audio-row-1">
                <span class="audio-label" id="audio-label-1">口訣：</span>
                <div class="btn-group">
                    <button class="icon-only-btn play-icon" onclick="playAudio(1)">▶</button>
                    <button class="icon-only-btn stop-icon" onclick="stopAudio()">■</button>
                </div>
            </div>
            <div class="audio-row" id="audio-row-2" style="display:none;">
                <span class="audio-label" id="audio-label-2">不帶氣：</span>
                <div class="btn-group">
                    <button class="icon-only-btn play-icon" onclick="playAudio(2)">▶</button>
                    <button class="icon-only-btn stop-icon" onclick="stopAudio()">■</button>
                </div>
            </div>
        </div>

        <div class="quote-box" id="master-box">
            <strong>【師云】：</strong><span id="detail-master"></span>
        </div>

        <h3 class="section-title">心理功課</h3>
        <p id="detail-mental" class="content-text"></p>

        <h3 class="section-title">生理功課</h3>
        <p id="detail-physical" class="content-text"></p>

        <h3 class="section-title">動作口訣</h3>
        <div id="detail-steps-container"></div>
    </div>
</div>

<script>
    let currentAudio = new Audio();

    const zenData = {
        1: { 
            name: "禮佛拜師", 
            mental: "以五寶之理德為師，發大宏願行，尊師重道，孝敬親長，建立以門規為依止的倫理秩序。", 
            physical: "(1) 尊師重道，倫理秩序禮節之遵守。\n(2) 活動脊椎等關節，對脊椎、關節、腸胃有助益之效。並可對治我慢，培養恭敬心與謙讓心。",
            stepsText: "【起式】：兩腳併攏。雙手合掌置於胸前，雙目垂簾觀想：十方三世諸佛、法性土、祖師及一切眾生與我合而為一。\n\n1. 吸氣入丹田。慢慢起身，同時兩手握空拳分開，置於腰際兩旁。 \n2. 閉氣三秒鐘。發「哈」聲慢慢把氣吐掉。同時兩手向下方分開。 \n3. 左腳向左跨出，腳掌平行，微微內扣。兩腳與肩同寬，膝蓋微彎，雙手合掌置於胸前，吸氣。 \n4. 雙目凝視眉心，同時吐氣。 \n5. 吐完後，吸氣。重複「凝視眉心、吐氣、吸氣」共三次。"
        },
        2: { 
            name: "法輪常轉", 
            mental: "世出世法，圓通自在，以四攝法普度眾生。", 
            physical: "通和全身氣脈，對關節、風濕及內臟等慢性病有助療之益。",
            master: "鬆、慢、柔、空，將各關節之筋骨適度伸展。",
            stepsText: "【前行祈求】：雙腳打開與肩同寬，膝蓋微彎，腳掌平行，微微內扣。雙手結一法印，合掌置於胸前 15 公分，心中默念三聲九字禪，祈求 祖師大慈大悲威德力加持。\n\n1【頸部】：下巴儘量貼住前胸，往右旋轉，向後時儘量延伸 (嘴巴微張)，連續轉三圈。再反方向轉三圈。\n2【肩部】：兩肩先往前、上、後、下旋轉三圈；再反方向往後、上、前、下旋轉三圈。\n3【手臂】：右臂往前、向上延伸、向後各三圈。再反方向各三圈。左臂亦同。\n4【手肘】：以對向手掌托住手肘，手前傾 15 度，往外、往內各轉三圈。雙手交替做。\n5【手指】：雙手握空拳，依序由大拇指至小指，手指往外轉三圈；再反方向轉三圈。\n6【手掌】：雙手握空拳，由大拇指開始用力展開，翻轉至掌心向上；再由小指收回，反覆三次。\n7【手腕】：握空拳，手腕由內往外轉三圈，由外往內轉三圈。\n8【腰部】：往右旋轉腰部，往後時縮小腹，轉三圈。再反方向三圈。\n9【膝蓋】：雙腳併攏，掌心護膝，右下蹲 3-9 圈，左上起；再左下蹲，右上起。反覆三次。\n10【腳踝】：抬右腳腳尖下壓，往外、內各轉三圈；換左腳。"
        },
        3: { 
            name: "身心一如", 
            mental: "真空即是妙有，身心一如，理事不二，慈悲平等，四無量心之行持。",
            physical: "(1) 以腹呼吸為主，加強腰腎及全身機能功用之行功。\n(2) 有益助療腎虛、腸胃病及身弱引起的慢性病。",
            master: "初步要言行一致，心行合一，先妥協進而和協。",
            stepsText: "【前行祈求】：雙手各結一法印，合掌置於胸前 15 公分，心中默念三聲九字禪，祈求 祖師大慈大悲威德力加持，讓弟子修身心一如，順利、成功、圓滿。\n\n1. 吸氣入丹田至飽，嘴成小圓形吐氣，雙手向前向下擺，同時曲膝下蹲。\n2. 大腿與地面平行，雙手與地面垂直，手臂往後擠壓腹部，發「嘶」聲將濁氣排出。\n3. 吸氣起身，雙手掄圓往上，至會陰高度時提肛 (2-3秒)，回至腰際閉氣三秒，發「哈」聲吐氣，雙手向下分開。",
            stepsTextNoQi: "1. 雙腳打開與肩同寬，腳掌平行，微微內扣，膝蓋微彎。\n2. 合掌置於胸前，雙手順勢向前向下擺，同時曲膝下蹲。\n3. 當大腿與地面平行，雙手與地面垂直，手臂往後擠壓腹部，同時發「嘶」聲。\n4. 雙手自然回擺，慢慢起身，雙手呈掄圓狀往上提升，至會陰高度時提肛，最後雙手回至腰際。",
            isRefining: true 
        },
        4: { 
            name: "慧眼觀空", 
            mental: "伏斷三惑，真空妙有一如。", 
            physical: "增強視力及腦力功能之行功。",
            stepsText: "1【壓擠眼球】：用力閉眼，視線向後腦無限遠方看，約 10-20 秒。\n2【眼球運動】：張眼不眨，景物看清。a.上下左右各三圈。b.圓形旋轉各三圈。\n3【定點凝視】：凝視三至五公尺佛像眉心，至酸澀為止。\n4【敷眼】：雙掌搓熱敷眼，吸氣觀想熱氣入丹田。\n5【揉眼】：吐氣時中指由鼻兩側沿眼眶劃圈按摩 36 圈。重複敷眼揉眼三次。"
        },
        7: { 
            name: "排除四大", 
            mental: "地水火風，四大調和，身強氣和，心淨方易修行。", 
            physical: "以肺部、內臟為主，加強全身機能功用之行功，對一切內科慢性病有所助益。",
            isRefining: true,
            stepsText: "1. 雙腳打開與肩同寬。 \n2. 吸氣入丹田。雙手掌心向上，由兩側向上舉。 \n3. 閉氣三秒。發「哈」聲，雙手掌心朝下，同時順勢向下用力按，雙膝配合下蹬。 \n4. 接著雙手交叉。重複做九次。"
        },
        8: { 
            name: "鼻聞法香", 
            mental: "悟前依法修，悟後法是塵，山窮水盡處，柳暗花明又一村。", 
            physical: "增強鼻部、呼吸器官及腦部功能之行功。",
            stepsText: "1. 搓鼻：掌心搓熱，摩擦鼻樑兩側及迎香穴。 \n2. 閉氣運動：吸氣，右手大拇指按住右鼻孔，左鼻孔吸氣，閉氣三秒。換左手指按左鼻孔，右鼻孔呼氣。如此反覆。"
        },
        9: { 
            name: "頂天立地", 
            mental: "道德事功，志與佛齊，悲智願行，一行圓修，能如是，可望作天人師。", 
            physical: "以頭為主，貫和全身氣脈之行功。",
            isRefining: true,
            stepsText: "1. 兩腳併攏。 \n2. 吸氣入丹田。兩手掌心朝上由兩側平舉向上合掌。 \n3. 腳尖點地踮起，身體儘量向上伸展。 \n4. 閉氣三秒，心中默念：頂天立地，志與佛齊。 \n5. 發「哈」聲，雙手由兩側慢慢分開向下。"
        },
        10: { 
            name: "笑口常開", 
            mental: "一音說法，十方普聞，布施、愛語、利行、同事為菩薩化眾之四攝法。", 
            physical: "以呼吸系統、食道為主，加強內臟功能發聲煉氣對肺、心、肝、腸胃、腦部等慢性病有助療之益處。",
            stepsText: "1. 吸氣。 \n2. 吐氣時大聲發「哈、哈、哈」大笑聲。 \n3. 觀想濁氣隨笑聲排出體外。反覆三次。"
        },
        13: { 
            name: "降龍伏虎", 
            mental: "貪、瞋、癡三毒，為生死輪迴之因，定慧等持，當下煩惱即是菩提。", 
            physical: "身、心、氣、力合用，加強全身機能功用之行功。對脊椎、關節具強化功用，並易於打通前後二脈。",
            stepsText: "1. 左腳跨前一步成左弓箭步。 \n2. 雙手平舉，掌心相對。吸氣入丹田。 \n3. 吐氣，雙手如推重物向前推，同時前腳彎、後腳伸直。 \n4. 換腳重複。"
        },
        14: { 
            name: "卓立特行", 
            mental: "志願作佛，依法修行，不為世間名聞利養，以至生死而移其心志。", 
            physical: "以足為主，加強和協全身機能功用之行功。",
            stepsText: "1. 右腳獨立，左膝抬高。 \n2. 雙手向兩側平舉以維持平衡。 \n3. 閉目凝神，自然呼吸。換腳練習。"
        },
        22: { 
            name: "大如意掌前行", 
            mental: "透過指尖、掌心感應能量，開發雙手能用，為大如意掌之基礎訓練。", 
            physical: "加強末梢神經感知與氣感，對活化腦部細胞、強化手部脈絡有顯著幫助。",
            note: "站著或坐著都可以做。\n全程肩膀放鬆，微守丹田，自然呼吸，動作慢但連續不中斷。\n大如意掌前行共五式，每式做30分鐘。",
            stepsText: "【前行祈求】：雙手各結一法印合掌置於胸前 15 公分，默念三聲九字禪，祈求 祖師大慈大悲威德力加持，讓弟子修大如意掌前行 1～5，順利、成功、圓滿。祈求完後，雙手改為合掌。\n\n一【拉橡皮筋】：雙掌置於胸前合掌，想像有橡皮筋纏繞，雙掌慢慢分開 (掌心相對)，觀想能量或金光從掌心射出。撐開至與肩同寬時收回，靠近但不碰觸，反覆練習。\n\n二【轉喇叭鎖】：由一轉二，掌心朝外，十指相對。中心點不動往外旋轉至剩餘 45 度時用勁往下轉至十指朝下，再收回起式。全程立掌，反覆練習。\n\n三【抱球】：由二轉三，掌心相對，十指微曲如同包裹一顆球。任意變換掌心距離、轉動，保持掌心相對且連續不斷，反覆練習。\n\n四【金剛指/十指禪功】：由三轉四，掌心朝內，十指相對 (大拇指也要)。觀想金光從十指尖射出，往外拉開至肩寬後收回，反覆練習。\n\n五【金剛指/十指禪功】：由四轉五，雙手握空拳，拳心向前，十指往前往下用勁。觀想金光從十指尖射出後收回，反覆練習。\n\n【收式】：雙手各結一法印合掌，默念三聲九字禪，感恩 祖師威德力加持。"
        },
        11: { name: "舌吐蓮華", mental: "兩舌、惡口、妄言、綺語為敗德之行，故言必正。", physical: "以神經系統為主，加強和協呼吸系統、腦部及全身機能功用之行功。", stepsText: "1【伸舌】：舌頭往前平伸再收回，連續三次。\n2【潤唇】：舌頭伸出沿唇轉圈，右三圈左三圈。\n3【頂舌】：舌在牙齦與內唇間轉圈，右三圈左三圈。\n4【彈舌】：舌尖頂住上顎 90 度往前彈出九次。" },
        12: { name: "橫出三界", mental: "念佛為往生淨土之大法，一聲佛號，戒、定、慧具足，當下西方淨土在自性中。", physical: "以足為主，加強和協全身氣能功用之行功，並有益打通兩腿氣脈。", stepsText: "1. 雙腳寬於肩，吸氣入丹田。2. 吐氣重心移右屈膝下蹲，觀想濁氣由腳掌出。3. 吸氣回中吸大地靈氣。4. 重心移左吐氣下蹲。左右算一次，共九次。" },
        15: { name: "六度圓修", mental: "六度一行修，萬德由心圓，事理不二，證道之門。", physical: "(1) 身、心、氣、力合一。(2) 對肝、腎、肩關節有益。", stepsText: "左腳站立，右腳擺向右後方 45 度，雙手向左前方。雙手與右腳交叉擺動不落地，男 36 次女 25 次。換腳亦同。" },
        16: { name: "抖落根塵", mental: "迴脫根塵，轉識成智，以入佛之理境。", physical: "以神經系統為主，加強和協全身機能功用之行功。", stepsText: "膝蓋微彎，氣凝丹田擴散至後丹田，讓氣呈輻射狀帶動全身自然綿密振動。收式發「哈」聲。" },
        17: { name: "初段總結式", mental: "鬆、慢、柔、空，有念進入無念。", physical: "身、心、氣作最圓滿的和協。", stepsText: "隨意而動，全身關節都動到且不重複動作。起式與收式要配合呼吸與哈氣。" }
    };

    const listContainer = document.getElementById('main-list');
    let activeId = null;

    Object.keys(zenData).forEach(id => {
        const div = document.createElement('div');
        div.className = 'zen-item';
        div.innerText = `${id}. ${zenData[id].name}`;
        div.onclick = () => showDetail(id);
        listContainer.appendChild(div);
    });

    function showDetail(id) {
        activeId = id;
        const item = zenData[id];
        stopAudio();

        document.getElementById('main-list').style.display = 'none';
        document.getElementById('detail-view').style.display = 'block';
        document.getElementById('detail-title').innerText = `${id}. ${item.name}`;
        document.getElementById('detail-mental').innerText = item.mental;
        document.getElementById('detail-physical').innerText = item.physical;

        const masterBox = document.getElementById('master-box');
        if (item.master) {
            masterBox.style.display = 'block';
            document.getElementById('detail-master').innerText = item.master;
        } else {
            masterBox.style.display = 'none';
        }

        document.getElementById('audio-label-1').innerText = item.isRefining ? "煉氣版：" : "口訣：";
        document.getElementById('audio-row-2').style.display = item.isRefining ? "flex" : "none";

        const container = document.getElementById('detail-steps-container');
        container.innerHTML = '';
        
        // 注意事項區塊
        if (item.note) {
            const noteDiv = document.createElement('div');
            noteDiv.className = 'note-block';
            noteDiv.innerHTML = `<strong>【注意事項】：</strong><br>${item.note}`;
            container.appendChild(noteDiv);
        }

        // 帶氣版/口訣
        if (item.stepsText) {
            if (item.isRefining || item.stepsTextNoQi) {
                const label = document.createElement('span');
                label.className = 'sub-label';
                label.innerText = '【帶氣版】';
                container.appendChild(label);
            }
            const div = document.createElement('div');
            div.className = 'instruction-block';
            div.innerText = item.stepsText;
            container.appendChild(div);
        }

        // 不帶氣版
        if (item.stepsTextNoQi) {
            const label = document.createElement('span');
            label.className = 'sub-label';
            label.innerText = '【不帶氣版】';
            container.appendChild(label);
            const div = document.createElement('div');
            div.className = 'instruction-block';
            div.innerText = item.stepsTextNoQi;
            container.appendChild(div);
        }

        if (!item.stepsText && !item.stepsTextNoQi) {
            container.innerText = "動作步驟整理中...";
        }
        window.scrollTo(0,0);
    }

    function playAudio(version) {
        const item = zenData[activeId];
        let fileName = (version === 2) ? `${item.name}2.mp3` : `${item.name}.mp3`;
        currentAudio.src = fileName;
        currentAudio.play().catch(e => alert("找不到音檔：" + fileName));
    }

    function stopAudio() {
        currentAudio.pause();
        currentAudio.currentTime = 0;
    }

    function showList() {
        stopAudio();
        document.getElementById('main-list').style.display = 'grid';
        document.getElementById('detail-view').style.display = 'none';
    }
</script>

</body>
</html>
